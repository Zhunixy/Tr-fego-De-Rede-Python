<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SharkFlow</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css')}}">
</head>

<body>
  
  <nav class="navbar">
      <div class="logo-container">
      <img src="{{url_for('static', filename='/images/SharkFlowLogo.png')}}" alt="LogoDaSharkFlow" class="logo">
      <span class="texto-logo">SharkFlow</span>
      </div>
      <ul class="nav-links text-align align-middle">
        <li><a href="#">Início</a></li>
        <li><a href="#">Sobre</a></li>  
        <li><a href="#">Documentação</a></li>
        <li><a href="#">Gráficos</a></li>
      </ul>
      <button class="botao">Login</button>
    </nav>
  <main>
    <div class="main">
      <h1 id="typing">Bem Vindo Ao <br> <br> <span>Sistema</span></h1> <br>
      <br><br>
    </div>
    <p class="p" style="text-align: center;">Sistema de análise de tráfego de rede da SharkFlow</p>
    <center>
    <i class="fa-solid fa-arrow-down flecha"></i>
  </center>

  {% if show_table and tabela %}
    <div style="overflow-x:auto;">
      <table class="tabela">
        <tr>
          <th class="attr">Hora/Data</th>
          <th class="attr">IP_origem</th>
          <th class="attr">IP_destino</th>
          <th class="attr">Porta_origem</th>
          <th class="attr">Porta_destino</th>
          <th class="attr">MAC_origem</th>
          <th class="attr">MAC_destino</th>
          <th class="attr">Protocolo</th>
          <th class="attr">Tamanho</th>
        </tr>
        {% for item in tabela %}
        <tr>
          <th>{{item.Hora}}</th>
          <th>{{item.IP_origem}}</th>
          <th>{{item.IP_destino}}</th>
          <th>{{item.Porta_origem}}</th>
          <th>{{item.Porta_destino}}</th>
          <th>{{item.MAC_origem}}</th>
          <th>{{item.MAC_destino}}</th>
          <th>{{item.Protocolo}}</th>
          <th>{{item.Tamanho}}</th>
        </tr>
        {% endfor %}
      </table>
    </div>

    {% if total_pages > 1 %}
    <div class="pagination-container">
      <div class="pagination">
        {% if page > 1 %}
          <a href="{{ url_for('main', page=page-1, tabela=1) }}" class="page-link">&laquo;</a>
        {% endif %}
        
        {% set start_page = [1, page-2]|max %}
        {% set end_page = [total_pages, page+2]|min %}
        
        {% if start_page > 1 %}
          <a href="{{ url_for('main', page=1, tabela=1) }}" class="page-link">1</a>
          {% if start_page > 2 %}
            <span class="page-dots">...</span>
          {% endif %}
        {% endif %}
        
        {% for p in range(start_page, end_page + 1) %}
          {% if p == page %}
            <a href="{{ url_for('main', page=p, tabela=1) }}" class="page-link active">{{ p }}</a>
          {% else %}
            <a href="{{ url_for('main', page=p, tabela=1) }}" class="page-link">{{ p }}</a>
          {% endif %}
        {% endfor %}
        
        {% if end_page < total_pages %}
          {% if end_page < total_pages - 1 %}
            <span class="page-dots">...</span>
          {% endif %}
          <a href="{{ url_for('main', page=total_pages, tabela=1) }}" class="page-link">{{ total_pages }}</a>
        {% endif %}
        
        {% if page < total_pages %}
          <a href="{{ url_for('main', page=page+1, tabela=1) }}" class="page-link">&raquo;</a>
        {% endif %}
      </div>
    </div>
    {% endif %}

    <form action="{{ url_for('main') }}" method="post">
      <p><br><br><br></p>
      <button class="btn_tabela" name="recarregar">Recarregar tabela</button> 
      <button class="btn_tabela" name="encerrar">Encerrar tabela</button> <br>
    </form>
  {% else %}
    <form action="{{ url_for('main') }}" method="post">
      <p><br><br><br></p>
      <button class="btn_tabela" name="iniciar">Iniciar tabela</button>
    </form>
  {% endif %}
</main>
<script src="../static/script.js"></script><script src="https://kit.fontawesome.com/951dd3b656.js" crossorigin="anonymous"></script>
</body>
</html>